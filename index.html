<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Node CamJam Edukit3</title>

        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
    </head>

    <body>


        <div data-role="header">
            <h1>Welcome !</h1>
        </div>
        <div role="main" class="ui-content">
            <div style="width:100%">
                <input type="button" value="forward" id="forward"  class="ui-icon-arrow-u ui-btn ui-btn-icon-top" />
            </div>

            <div>
                <input type="button" value="left" id="left" class="ui-icon-arrow-l ui-btn ui-btn-icon-left"/>
                <input type="button" value="right" id="right" class="ui-icon-arrow-r ui-btn ui-btn-icon-right"/>
            </div>

            <div>
                <input type="button" value="backward" id="backward" data-icon="arrow-d" class="ui-btn ui-btn-icon-bottom"/>
            </div>
        </div>
        <div data-role="footer">
            <p>raspberry : <sapn id="rpiStatus"></sapn></p>
        </div>


        <script src="http://code.jquery.com/jquery-1.12.3.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script>
            var socket = io.connect(location.host + '/client');
            socket.on('connection', function(messageObject) {
                alert('Le serveur a un message pour vous : ' + messageObject.message);
            });

            socket.on('status', function(messageObject) {
                if (messageObject.raspberryStatus) {
                    $('input[type="button"]').removeAttr("disabled");
                } else {
                    $('input[type="button"]').attr("disabled", "disabled");
                }

                $("#rpiStatus").html(messageObject.raspberryStatus ? "ok" : "ko");
            });

            $('#forward').click(function () {
                socket.emit('movement', 'forward');
            })
            $('#backward').click(function () {
                socket.emit('movement', 'backward');
            })

            $('#left').click(function () {
                socket.emit('movement', 'left');
            })
            $('#right').click(function () {
                socket.emit('movement', 'right');
            })
        </script>
    </body>
</html>
